<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho â€¢ NewGen Store</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="logo"><h1>NewGen</h1></div>
        <nav>
            <a href="index.html">InÃ­cio</a>
            <a href="produtos.html">Produtos</a>
            <a href="login.html">Login</a>
            <a href="carrinho.html">Carrinho <span class="cart-counter">0</span></a>
        </nav>
        <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
    </header>

    <main class="cart-section">
        <h2>Seu Carrinho Neon</h2>
        <div id="itens-carrinho"></div>

        <div class="total-final" id="total">Total: R$ 0,00</div>

        <div style="display: flex; justify-content: center; gap: 20px; margin-top: 30px; flex-wrap: wrap;">
            <button class="btn-comprar" onclick="esvaziarCarrinho()" style="background:#ff0055">Esvaziar Carrinho</button>
            <button class="btn-comprar" onclick="window.location.href='checkout.html'">Finalizar Compra</button>
        </div>
    </main>

    <footer>
        <p>Â© 2025 NewGen - Todos os direitos reservados</p>
    </footer>

    <script>
        // FunÃ§Ã£o para renderizar o carrinho
        function renderizarCarrinho() {
            try {
                const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
                const container = document.getElementById('itens-carrinho');
                const totalElement = document.getElementById('total');
                let total = 0;

                console.log('Carrinho atual:', carrinho);

                if (carrinho.length === 0) {
                    container.innerHTML = '<p style="font-size:20px; color:#aaa; text-align:center; padding:40px;">Seu carrinho estÃ¡ vazio... <br> Volte e escolha algo futurista! ðŸŒŒ</p>';
                    totalElement.textContent = 'Total: R$ 0,00';
                } else {
                    container.innerHTML = '';
                    carrinho.forEach(item => {
                        const subtotal = item.preco * item.quantidade;
                        total += subtotal;

                        const itemElement = document.createElement('div');
                        itemElement.className = 'cart-item';
                        itemElement.innerHTML = `
                            <img src="${item.imagem || 'https://via.placeholder.com/100?text=Produto'}" alt="${item.nome}">
                            <div>
                                <h3>${item.nome}</h3>
                                <p style="color:#aaa; font-size:14px; margin-top:5px;">${item.descricao || ''}</p>
                                <p style="margin-top:10px;">R$ ${item.preco.toLocaleString('pt-BR', {minimumFractionDigits: 2})} unid.</p>
                            </div>
                            <div>
                                <button class="quantity-btn" onclick="alterarQuantidade('${item.nome.replace(/'/g, "\\'")}', -1)">âˆ’</button>
                                <strong style="margin:0 10px">${item.quantidade}</strong>
                                <button class="quantity-btn" onclick="alterarQuantidade('${item.nome.replace(/'/g, "\\'")}', 1)">+</button>
                            </div>
                            <div>
                                <p style="color:#00ffff; font-size:20px">R$ ${subtotal.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>
                                <button class="remove-btn" onclick="removerDoCarrinho('${item.nome.replace(/'/g, "\\'")}')">Remover</button>
                            </div>
                        `;
                        container.appendChild(itemElement);
                    });
                }

                totalElement.textContent = `Total: R$ ${total.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                
                // Atualizar contador global
                if (typeof atualizarContador === 'function') {
                    atualizarContador();
                }
            } catch (error) {
                console.error('Erro ao renderizar carrinho:', error);
                document.getElementById('itens-carrinho').innerHTML = 
                    '<p style="color:#ff5555; text-align:center; padding:40px;">Erro ao carregar carrinho. Por favor, recarregue a pÃ¡gina.</p>';
            }
        }

        // Inicializar quando a pÃ¡gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('PÃ¡gina carrinho carregada');
            renderizarCarrinho();
            
            // Configurar botÃ£o hamburguer
            const menuToggle = document.querySelector('.menu-toggle');
            if (menuToggle) {
                menuToggle.style.display = 'flex';
            }
        });
    </script>

    <script src="script.js"></script>
</body>
</html>